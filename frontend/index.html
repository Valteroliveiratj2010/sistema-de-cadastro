<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor PRO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css?v=2.0">

    <style>
        /* CSS CRÍTICO PARA SIDEBAR - FORÇADO */
        @media (max-width: 991.98px) {
            .sidebar {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 280px !important;
                transform: translateX(-100%) !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                height: 100vh !important;
                z-index: 2000 !important;
                overflow-y: auto !important;
                transition: transform 0.3s ease !important;
            }
            
            .sidebar.active {
                transform: translateX(0) !important;
            }
            
            .sidebar .sidebar-title {
                padding-top: 4rem !important;
                margin-top: 0 !important;
                margin-bottom: 1rem !important;
            }
            
            .navbar-toggler {
                display: block !important;
                position: fixed !important;
                top: 1rem !important;
                left: 1rem !important;
                z-index: 2001 !important;
                background-color: #007bff !important;
                border: none !important;
                border-radius: 4px !important;
                padding: 0.5rem !important;
                color: white !important;
                cursor: pointer !important;
            }
            
            .overlay {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100% !important;
                height: 100% !important;
                background-color: rgba(0, 0, 0, 0.5) !important;
                z-index: 1999 !important;
                opacity: 0 !important;
                visibility: hidden !important;
                transition: all 0.3s ease !important;
            }
            
            .overlay.active {
                opacity: 1 !important;
                visibility: visible !important;
            }
        }
        
        /* CORREÇÃO ESPECÍFICA PARA TELAS MENORES - GARANTIR 50% */
        @media (max-width: 768px) {
            .sidebar {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 280px !important;
            }
        }
        
        @media (max-width: 576px) {
            .sidebar {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 280px !important;
            }
        }
        
        @media (max-width: 480px) {
            .sidebar {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 280px !important;
            }
        }
        
        /* SOBRESCREVER QUALQUER REGRA QUE DEFINA 100% - APENAS EM MOBILE/TABLET */
        @media (max-width: 991.98px) {
            .sidebar {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 280px !important;
            }
        }
        
        /* CORREÇÃO IMEDIATA PARA LINKS DA SIDEBAR */
        .sidebar .nav-link {
            cursor: pointer !important;
            pointer-events: auto !important;
        }
        
        .sidebar .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
        }
    </style>
</head>

<body>
    <button class="btn navbar-toggler d-lg-none" type="button" id="sidebarToggle" aria-label="Menu">
        <i class="bi bi-list text-white"></i>
    </button>

    <div id="app-container">
        <aside class="sidebar">
                            <h1 class="sidebar-title"><i class="bi bi-shield-check me-2"></i><span data-i18n="appTitle">Gestor PRO</span></h1>
            <nav class="nav flex-column">
                <a class="nav-link active" href="#" data-section="dashboardSection" data-i18n="dashboard"><i
                        class="bi bi-grid-1x2-fill me-2"></i>Dashboard</a>
                <a class="nav-link" href="#" data-section="clientsSection" data-i18n="clients"><i
                        class="bi bi-people-fill me-2"></i>Clientes</a>
                <a class="nav-link" href="#" data-section="salesSection" data-i18n="sales"><i
                        class="bi bi-cart-check-fill me-2"></i>Vendas</a>
                <a class="nav-link" href="#" data-section="reportsSection" data-i18n="reports"><i
                        class="bi bi-graph-up me-2"></i>Relatórios</a>
                <a class="nav-link" href="#" data-section="productsSection" data-i18n="products"><i
                        class="bi bi-box-seam me-2"></i>Produtos</a>
                <a class="nav-link" href="#" data-section="usersSection" data-i18n="users"><i
                        class="bi bi-person-gear me-2"></i>Utilizadores</a>
                <a class="nav-link" href="#" data-section="suppliersSection" data-i18n="suppliers"><i
                        class="bi bi-truck me-2"></i>Fornecedores</a>
                <a class="nav-link" href="#" data-section="purchasesSection" data-i18n="purchases"><i class="bi bi-bag me-2"></i>Compras</a>
                <a class="nav-link mt-auto" href="#" id="logoutButton" data-section="logoutSection" data-i18n="logout"><i
                        class="bi bi-box-arrow-right me-2"></i>Sair</a>
            </nav>
            <div id="languageSelector" class="mt-3"></div>
        </aside>
        <main class="main-content" id="mainContent">
            <div class="content-wrapper">
                <section id="dashboardSection" class="content-section">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-grid-1x2 me-2"></i><span data-i18n="dashboard">Dashboard</span></h2>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" onclick="loadDashboardData()">
                                <i class="bi bi-arrow-clockwise me-2"></i><span data-i18n="refresh">Atualizar</span>
                            </button>
                            <button class="btn btn-outline-success" onclick="openFreshAlertsModal()" title="Ver alertas de estoque">
                                <i class="bi bi-exclamation-triangle me-2"></i><span data-i18n="stockAlerts">Alertas de Estoque</span>
                            </button>
                        </div>
                    </div>



                    <!-- KPI Cards - Top Section (Primeira Linha) -->
                    <div class="row g-2 mb-3">
                        <div class="col-md-2">
                            <div class="card kpi-card text-center" id="totalClients">
                                <div class="card-body">
                                    <i class="bi bi-people-fill fs-1 text-primary mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="totalClients">TOTAL DE CLIENTES</h6>
                                    <div class="fs-2 fw-bold text-primary">1</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-success text-center" id="salesThisMonth">
                                <div class="card-body">
                                    <i class="bi bi-cart-check-fill fs-1 text-success mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="salesThisMonth">VENDAS DO MÊS</h6>
                                    <div class="fs-2 fw-bold text-success">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-info text-center" id="totalReceivable">
                                <div class="card-body">
                                    <i class="bi bi-cash-stack fs-1 text-info mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="totalReceivable">A RECEBER</h6>
                                    <div class="fs-2 fw-bold text-info">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-warning text-center" id="totalAccountsPayable">
                                <div class="card-body">
                                    <i class="bi bi-credit-card-fill fs-1 text-warning mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="totalAccountsPayable">A PAGAR</h6>
                                    <div class="fs-2 fw-bold text-warning">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-success text-center" id="profit">
                                <div class="card-body">
                                    <i class="bi bi-graph-up-arrow fs-1 text-success mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="profit">LUCRO</h6>
                                    <div class="fs-2 fw-bold text-success">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI Cards - Second Row (Segunda Linha) -->
                    <div class="row g-2 mb-4">
                        <div class="col-md-2">
                            <div class="card kpi-card text-center" id="orderValue">
                                <div class="card-body">
                                    <i class="bi bi-currency-dollar fs-1 text-primary mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="orderValue">VALOR DO PEDIDO</h6>
                                    <div class="fs-2 fw-bold text-primary">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-info text-center" id="averageTicket">
                                <div class="card-body">
                                    <i class="bi bi-receipt fs-1 text-info mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="averageTicket">TICKET MÉDIO</h6>
                                    <div class="fs-2 fw-bold text-info">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="card kpi-card kpi-danger text-center" id="overdueSales">
                                <div class="card-body">
                                    <i class="bi bi-exclamation-triangle-fill fs-1 text-danger mb-2"></i>
                                    <h6 class="card-title text-muted" data-i18n="overdueSales">VENDAS VENCIDAS</h6>
                                    <div class="fs-2 fw-bold text-danger">R$ 0,00</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts and Top Lists - Middle Section -->
                    <div class="row g-4 mb-4">
                        <!-- Sales Chart -->
                        <div class="col-lg-8">
                            <div class="elegant-chart-container elegant-fade-in">
                                <h2 class="elegant-chart-title" data-i18n="monthlySalesComparison">📈 Vendas Mensais Comparativo</h2>
                                <p class="elegant-chart-subtitle" data-i18n="comparativeAnalysis">Análise comparativa entre <span id="previousYear">2023</span> e <span id="currentYear">2024</span></p>
                                
                                <div class="elegant-chart-wrapper">
                                    <canvas id="salesChart" height="300"></canvas>
                                </div>
                                
                                <div class="elegant-stats-grid">
                                    <div class="elegant-stat-item">
                                        <span class="elegant-stat-value" id="totalSales2024">R$ 893K</span>
                                        <span class="elegant-stat-label" data-i18n="sales2024">Vendas 2024</span>
                                    </div>
                                    <div class="elegant-stat-item">
                                        <span class="elegant-stat-value" id="growthRate">+12.8%</span>
                                        <span class="elegant-stat-label" data-i18n="growth">Crescimento</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Top Lists -->
                        <div class="col-lg-4">
                            <!-- Top Products -->
                            <div class="card shadow-sm mb-3">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-box-seam me-2"></i><span data-i18n="topProductsList">Top 5 Produtos Mais Vendidos</span></h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm" id="topProductsTable">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="tables">Tabelas</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td class="text-center text-muted" data-i18n="noProductsSold">Nenhum produto vendido</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Top Clients -->
                            <div class="card shadow-sm mb-3">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--success-color) 0%, var(--secondary-light) 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-people me-2"></i><span data-i18n="topClients">Top 5 Clientes com Mais Compras</span></h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm" id="topClientsTable">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="client">Cliente</th>
                                                    <th data-i18n="total">Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Dayse Oliveira</td>
                                                    <td>R$ 10,00</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Top Suppliers -->
                            <div class="card shadow-sm">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--warning-color) 0%, #F59E0B 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-truck me-2"></i><span data-i18n="topSuppliers">Top 5 Fornecedores</span></h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm" id="topSuppliersTable">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="supplier">Fornecedor</th>
                                                    <th data-i18n="purchases">Compras</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="2" class="text-center text-muted" data-i18n="noSuppliersFound">Nenhum fornecedor encontrado</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Maturities - Bottom Section -->
                    <div class="row g-4">
                        <!-- Overdue Accounts Receivable -->
                        <div class="col-lg-6">
                            <div class="card shadow-sm">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--danger-color) 0%, #EF4444 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-exclamation-circle me-2"></i><span data-i18n="overdueReceivables">Contas a Receber Vencidas</span></h6>
                                </div>
                                <div class="card-body">
                                    <div id="overdueReceivableContent">
                                        <p class="text-center text-muted" data-i18n="noPendingSales">Nenhuma venda pendente encontrada.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Overdue Accounts Payable -->
                        <div class="col-lg-6">
                            <div class="card shadow-sm">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--danger-color) 0%, #EF4444 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-exclamation-triangle me-2"></i><span data-i18n="overduePayables">Contas a Pagar Vencidas</span></h6>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm" id="overduePayableTable">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="id">ID</th>
                                                    <th data-i18n="supplier">FORNECEDOR</th>
                                                    <th data-i18n="dueDate">VENCIMENTO</th>
                                                    <th data-i18n="value">VALOR</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>Fornecedor</td>
                                                    <td>25/01/2023</td>
                                                    <td>R$ 200,00</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Accounts Receivable -->
                        <div class="col-lg-6">
                            <div class="card shadow-sm">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--warning-color) 0%, #F59E0B 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-calendar-event me-2"></i><span data-i18n="upcomingReceivables">Contas a Receber Próximas (30 dias)</span></h6>
                                </div>
                                <div class="card-body">
                                    <div id="upcomingReceivableContent">
                                        <p class="text-center text-muted" data-i18n="noPendingSales">Nenhuma venda pendente encontrada.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Accounts Payable -->
                        <div class="col-lg-6">
                            <div class="card shadow-sm">
                                <div class="card-header" style="background: linear-gradient(135deg, var(--warning-color) 0%, #F59E0B 100%); color: white;">
                                    <h6 class="mb-0"><i class="bi bi-calendar-check me-2"></i><span data-i18n="upcomingPayables">Contas a Pagar Próximas (30 dias)</span></h6>
                                </div>
                                <div class="card-body">
                                    <div id="upcomingPayableContent">
                                        <p class="text-center text-muted" data-i18n="noPendingPurchases">Nenhuma compra pendente encontrada.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="clientsSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-people me-2"></i><span data-i18n="manageClients">Gerenciar Clientes</span></h2>
                                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#clientModal">
                                <i class="bi bi-plus-circle me-2"></i><span data-i18n="newClient">Novo Cliente</span>
                            </button>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar clientes por nome, email, telefone ou CPF/CNPJ..." data-search="clients" data-i18n-placeholder="searchClients">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="clients">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="clients">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Clientes -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="clientsTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="name">Nome</th>
                                            <th data-i18n="cpfCnpj">CPF/CNPJ</th>
                                            <th data-i18n="phone">Telefone</th>
                                            <th data-i18n="email">Email</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center text-muted py-4">
                                                <i class="bi bi-people fs-1 d-block mb-2"></i>
                                                <span data-i18n="noClientsRegistered">Nenhum cliente cadastrado</span>
                                                <br>
                                                <small data-i18n="clickNewClient">Clique em "Novo Cliente" para adicionar o primeiro</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de clientes">
                                <ul class="pagination justify-content-center mb-0" id="clientsPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
                <section id="salesSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-cart-check me-2"></i><span data-i18n="manageSales">Gerenciar Vendas</span></h2>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#saleModal">
                            <i class="bi bi-plus-circle me-2"></i><span data-i18n="newSale">Nova Venda</span>
                        </button>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar vendas por cliente, ID ou status..." data-search="sales" data-i18n-placeholder="searchSales">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="sales">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="sales">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Vendas -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="salesTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="id">ID</th>
                                            <th data-i18n="client">Cliente</th>
                                            <th data-i18n="total">Valor Total</th>
                                            <th data-i18n="date">Data</th>
                                            <th data-i18n="status">Status</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">
                                                <i class="bi bi-cart-check fs-1 d-block mb-2"></i>
                                                <span data-i18n="noSalesFound">Nenhuma venda registrada</span>
                                                <br>
                                                <small data-i18n="clickNewSale">Clique em "Nova Venda" para adicionar a primeira</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de vendas">
                                <ul class="pagination justify-content-center mb-0" id="salesPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
                <section id="reportsSection" class="content-section" style="display: none;">
                    <h3 class="mb-4"><i class="bi bi-graph-up me-2"></i><span data-i18n="manageReports">Relatórios Financeiros e de Vendas</span></h3>

                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0"><i class="bi bi-bar-chart-line me-2"></i><span data-i18n="salesReport">Relatório de Vendas por Período</span></h5>
                        </div>
                        <div class="card-body">
                            <form id="reportPeriodForm" data-action="generateSalesReport">
                                <div class="row g-3">
                                    <div class="col-md-5">
                                        <label for="startDate" class="form-label" data-i18n="startDate">Data Inicial</label>
                                        <input type="date" class="form-control" id="startDate" required>
                                    </div>
                                    <div class="col-md-5">
                                        <label for="endDate" class="form-label" data-i18n="endDate">Data Final</label>
                                        <input type="date" class="form-control" id="endDate" required>
                                    </div>
                                    <div class="col-md-2 d-flex align-items-end">
                                        <button type="submit" class="btn btn-primary w-100"><i class="bi bi-play-circle me-2"></i><span data-i18n="generateReport">Gerar Relatório</span></button>
                                    </div>
                                </div>
                            </form>
                            <hr class="my-4">
                            <div id="reportResults">
                                <p class="text-center text-muted" data-i18n="selectPeriodAndGenerateReport">Selecione um período e clique em "Gerar Relatório" para ver os resultados.</p>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0"><i class="bi bi-currency-dollar me-2"></i><span data-i18n="cashFlowReport">Fluxo de Caixa</span></h5>
                        </div>
                        <div class="card-body">
                            <form id="cashFlowReportForm" data-action="generateCashFlowReport">
                                <div class="row g-3">
                                    <div class="col-md-5">
                                        <label for="cashFlowStartDate" class="form-label" data-i18n="startDate">Data Inicial</label>
                                        <input type="date" class="form-control" id="cashFlowStartDate" required>
                                    </div>
                                    <div class="col-md-5">
                                        <label for="cashFlowEndDate" class="form-label" data-i18n="endDate">Data Final</label>
                                        <input type="date" class="form-control" id="cashFlowEndDate" required>
                                    </div>
                                    <div class="col-md-2 d-flex align-items-end">
                                        <button type="submit" class="btn btn-success w-100"><i class="bi bi-cash-stack me-2"></i><span data-i18n="generateFlow">Gerar Fluxo</span></button>
                                    </div>
                                </div>
                            </form>
                            <hr class="my-4">
                            <div id="cashFlowReportResults">
                                <p class="text-center text-muted" data-i18n="selectPeriodAndGenerateFlow">Selecione um período e clique em "Gerar Fluxo" para ver o fluxo de caixa.</p>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="bi bi-file-earmark-spreadsheet me-2"></i><span data-i18n="accountingReport">Relatório Contábil Consolidado (CSV)</span></h5>
                        </div>
                        <div class="card-body">
                            <form id="accountingReportForm" data-action="exportAccountingReport">
                                <div class="row g-3">
                                    <div class="col-md-5">
                                        <label for="accountingStartDate" class="form-label" data-i18n="startDate">Data Inicial</label>
                                        <input type="date" class="form-control" id="accountingStartDate" required>
                                    </div>
                                    <div class="col-md-5">
                                        <label for="accountingEndDate" class="form-label" data-i18n="endDate">Data Final</label>
                                        <input type="date" class="form-control" id="accountingEndDate" required>
                                    </div>
                                    <div class="col-md-2 d-flex align-items-end">
                                        <button type="submit" class="btn btn-info w-100 text-white"><i class="bi bi-download me-2"></i><span data-i18n="exportCSV">Exportar CSV</span></button>
                                    </div>
                                </div>
                            </form>
                            <p class="text-muted text-center mt-3 mb-0" data-i18n="accountingReportDescription">Este relatório gera um arquivo CSV com todas as transações financeiras (entradas e saídas) do período.</p>
                        </div>
                    </div>
                    
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-warning text-dark">
                            <h5 class="mb-0"><i class="bi bi-graph-up-arrow me-2"></i><span data-i18n="salesPrediction">Análise Preditiva de Vendas</span></h5>
                        </div>
                        <div class="card-body">
                            <form id="salesPredictionForm" data-action="generateSalesPrediction">
                                <div class="row g-3">
                                    <div class="col-md-10">
                                        <label for="predictionMonths" class="form-label" data-i18n="predictionMonthsLabel">Histórico de Meses para Análise (3-24)</label>
                                        <input type="number" class="form-control" id="predictionMonths" value="12" min="3" max="24" required>
                                    </div>
                                    <div class="col-md-2 d-flex align-items-end">
                                        <button type="submit" class="btn btn-warning w-100"><i class="bi bi-lightbulb me-2"></i><span data-i18n="generateProjection">Gerar Projeção</span></button>
                                    </div>
                                </div>
                            </form>
                            <hr class="my-4">
                            <div id="salesPredictionResults">
                                <p class="text-center text-muted" data-i18n="selectMonthsAndGenerateProjection">Selecione o histórico de meses e clique em "Gerar Projeção" para ver a análise.</p>
                            </div>
                        </div>
                    </div>

                    <section id="saleDetailSection" class="content-section" style="display: none;"></section>
                    <section id="purchaseDetailSection" class="content-section" style="display: none;"></section>

                </section>
                <section id="productsSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-box-seam me-2"></i><span data-i18n="manageProducts">Gerenciar Produtos</span></h2>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#productModal">
                            <i class="bi bi-plus-circle me-2"></i><span data-i18n="newProduct">Novo Produto</span>
                        </button>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar produtos por nome, descrição ou SKU..." data-search="products" data-i18n-placeholder="searchProducts">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="products">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="products">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Produtos -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="productsTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="name">Nome</th>
                                            <th data-i18n="description">Descrição</th>
                                            <th data-i18n="price">Preço</th>
                                            <th data-i18n="stock">Estoque</th>
                                            <th data-i18n="status">Status</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">
                                                <i class="bi bi-box-seam fs-1 d-block mb-2"></i>
                                                <span data-i18n="noProductsRegistered">Nenhum produto cadastrado</span>
                                                <br>
                                                <small>Clique em "Novo Produto" para adicionar o primeiro</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de produtos">
                                <ul class="pagination justify-content-center mb-0" id="productsPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
                <section id="usersSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-people-fill me-2"></i><span data-i18n="manageUsers">Gerenciar Usuários</span></h2>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" onclick="loadUsers()">
                                <i class="bi bi-arrow-clockwise me-2"></i><span data-i18n="update">Atualizar</span>
                            </button>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userModal">
                                <i class="bi bi-plus-circle me-2"></i><span data-i18n="newUser">Novo Usuário</span>
                            </button>
                        </div>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar usuários por username, email ou role..." data-search="users" data-i18n-placeholder="searchUsers">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="users">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="users">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Usuários -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="usersTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="username">Username</th>
                                            <th data-i18n="email">Email</th>
                                            <th data-i18n="role">Role</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="4" class="text-center text-muted py-4">
                                                <i class="bi bi-people-fill fs-1 d-block mb-2"></i>
                                                <span data-i18n="noUsersFound">Nenhum usuário cadastrado</span>
                                                <br>
                                                <small data-i18n="clickNewUser">Clique em "Novo Usuário" para adicionar o primeiro</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de usuários">
                                <ul class="pagination justify-content-center mb-0" id="usersPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
                <section id="suppliersSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-truck me-2"></i><span data-i18n="manageSuppliers">Gerenciar Fornecedores</span></h2>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-primary" onclick="loadSuppliers()">
                                <i class="bi bi-arrow-clockwise me-2"></i><span data-i18n="update">Atualizar</span>
                            </button>
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#supplierModal">
                                <i class="bi bi-plus-circle me-2"></i><span data-i18n="newSupplier">Novo Fornecedor</span>
                            </button>
                        </div>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar fornecedores por nome, CNPJ, email ou telefone..." data-search="suppliers" data-i18n-placeholder="searchSuppliers">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="suppliers">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="suppliers">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Fornecedores -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="suppliersTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="name">Nome</th>
                                            <th data-i18n="cpfCnpj">CNPJ</th>
                                            <th data-i18n="phone">Telefone</th>
                                            <th data-i18n="email">Email</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="5" class="text-center text-muted py-4">
                                                <i class="bi bi-truck fs-1 d-block mb-2"></i>
                                                Nenhum fornecedor cadastrado
                                                <br>
                                                <small>Clique em "Novo Fornecedor" para adicionar o primeiro</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de fornecedores">
                                <ul class="pagination justify-content-center mb-0" id="suppliersPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
                <section id="purchasesSection" class="content-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="mb-0"><i class="bi bi-cart-plus me-2"></i><span data-i18n="managePurchases">Gerenciar Compras</span></h2>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#purchaseModal">
                            <i class="bi bi-plus-circle me-2"></i><span data-i18n="newPurchase">Nova Compra</span>
                        </button>
                    </div>

                    <!-- Filtros e Busca -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="bi bi-search"></i></span>
                                        <input type="text" class="form-control" placeholder="Buscar compras por fornecedor, ID ou status..." data-search="purchases" data-i18n-placeholder="searchPurchases">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-outline-secondary" data-action="export" data-type="purchases">
                                            <i class="bi bi-download me-2"></i><span data-i18n="export">Exportar</span>
                                        </button>
                                        <button class="btn btn-outline-secondary" data-action="print" data-type="purchases">
                                            <i class="bi bi-printer me-2"></i><span data-i18n="print">Imprimir</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tabela de Compras -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="purchasesTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th data-i18n="id">ID</th>
                                            <th data-i18n="supplier">Fornecedor</th>
                                            <th data-i18n="total">Valor Total</th>
                                            <th data-i18n="date">Data</th>
                                            <th data-i18n="status">Status</th>
                                            <th data-i18n="actions">Ações</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">
                                                <i class="bi bi-cart-plus fs-1 d-block mb-2"></i>
                                                <span data-i18n="noPurchasesFound">Nenhuma compra registrada</span>
                                                <br>
                                                <small data-i18n="clickNewPurchase">Clique em "Nova Compra" para adicionar a primeira</small>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Paginação -->
                            <nav aria-label="Paginação de compras">
                                <ul class="pagination justify-content-center mb-0" id="purchasesPagination">
                                    <!-- Paginação será inserida dinamicamente -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>
    <div id="sidebar-overlay" class="overlay"></div>

    <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                                            <h5 class="modal-title" id="clientModalLabel" data-i18n="newClient">Novo Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="clientForm" data-action="createClient">
                        <input type="hidden" name="id" id="clientId">
                        <div class="mb-3">
                            <label for="clientName" class="form-label" data-i18n="name">Nome</label>
                            <input type="text" class="form-control" id="clientName" name="nome" required>
                        </div>
                        <div class="mb-3">
                            <label for="clientEmail" class="form-label" data-i18n="email">Email</label>
                            <input type="email" class="form-control" id="clientEmail" name="email">
                        </div>
                        <div class="mb-3">
                            <label for="clientPhone" class="form-label" data-i18n="phone">Telefone</label>
                            <input type="text" class="form-control" id="clientPhone" name="telefone">
                        </div>
                        <div class="mb-3">
                            <label for="clientCpfCnpj" class="form-label" data-i18n="cpfCnpj">CPF/CNPJ</label>
                            <input type="text" class="form-control" id="clientCpfCnpj" name="cpfCnpj">
                        </div>
                        <div class="mb-3">
                            <label for="clientAddress" class="form-label" data-i18n="address">Endereço</label>
                            <textarea class="form-control" id="clientAddress" name="endereco" rows="3"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancelar</button>
                            <button type="submit" class="btn btn-primary" data-i18n="saveClient">Salvar Cliente</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="saleModal" tabindex="-1" aria-labelledby="saleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 600px !important; width: 600px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saleModalLabel" data-i18n="newSale">Nova Venda</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="saleForm" data-action="createSale">
                        <input type="hidden" id="saleId">
                        <div class="mb-3">
                            <label for="saleClient" class="form-label" data-i18n="client">Cliente</label>
                            <select class="form-select" id="saleClient" required></select>
                        </div>
                        <div class="card mb-3">
                            <div class="card-header" data-i18n="saleProducts">Produtos da Venda</div>
                            <div class="card-body">
                                <div id="saleProductsList" class="mb-2" style="max-height: 150px; overflow-y: auto;">
                                    <p class="text-muted text-center m-0" data-i18n="noProductsAdded">Nenhum produto adicionado.</p>
                                </div>
                                <div class="row g-2 align-items-end">
                                    <div class="col-md-5">
                                        <label for="productSelect" class="form-label" data-i18n="product">Produto</label>
                                        <select class="form-control" id="productSelect" style="width: 100%;"></select>
                                    </div>
                                    <div class="col-md-2">
                                        <label for="productQuantity" class="form-label" data-i18n="quantity">Qtd</label>
                                        <input type="number" class="form-control" id="productQuantity" value="1"
                                            min="1">
                                    </div>
                                    <div class="col-md-5">
                                        <label for="productUnitPrice" class="form-label" data-i18n="unitPrice">Preço Unit.</label>
                                        <input type="number" step="0.01" class="form-control" id="productUnitPrice"
                                            placeholder="Preço">
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <button type="button" class="btn btn-primary" id="btnAddProduct"
                                            title="Adicionar Produto">
                                            <i class="fas fa-plus me-2"></i><span data-i18n="addProduct">Adicionar Produto</span>
                                        </button>
                                    </div>
                                </div>
                                <div id="productDetailsDisplay" class="text-muted small mt-2 text-start"></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="saleTotalValueDisplay" class="form-label" data-i18n="saleTotalValue">Valor Total da Venda</label>
                                <input type="text" class="form-control fw-bold" id="saleTotalValueDisplay" readonly
                                    value="R$ 0,00">
                                <input type="hidden" id="saleTotalValue" value="0">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="saleDueDate" class="form-label" data-i18n="dueDate">Data de Vencimento</label>
                                <input type="date" class="form-control" id="saleDueDate">
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" data-i18n="initialPayment">Pagamento Inicial</div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="salePaidValueInitial" class="form-label" data-i18n="paidValue">Valor Pago</label>
                                        <input type="number" step="0.01" class="form-control" id="salePaidValueInitial"
                                            value="0">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="paymentForma" class="form-label" data-i18n="paymentMethod">Forma de Pagamento</label>
                                        <select class="form-select" id="paymentForma">
                                            <option value="Dinheiro" data-i18n="cash">Dinheiro</option>
                                            <option value="Cartão de Crédito" data-i18n="creditCard">Cartão de Crédito</option>
                                            <option value="Crediário" data-i18n="installment">Crediário</option>
                                            <option value="PIX" data-i18n="pix">PIX</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row" id="paymentDetailsFields">
                                    <div class="col-md-6 mb-3" id="parcelasField" style="display: none;">
                                        <label for="paymentParcelas" class="form-label" data-i18n="installments">Parcelas</label>
                                        <input type="number" class="form-control" id="paymentParcelas" value="1"
                                            min="1">
                                    </div>
                                    <div class="col-md-6 mb-3" id="bandeiraCartaoField" style="display: none;">
                                        <label for="paymentBandeiraCartao" class="form-label" data-i18n="cardBrand">Bandeira Cartão</label>
                                        <input type="text" class="form-control" id="paymentBandeiraCartao"
                                            placeholder="Ex: Visa, Mastercard">
                                    </div>
                                    <div class="col-md-12 mb-3" id="bancoCrediarioField" style="display: none;">
                                        <label for="paymentBancoCrediario" class="form-label" data-i18n="installmentBank">Banco/Instituição
                                            Crediário</label>
                                        <input type="text" class="form-control" id="paymentBancoCrediario"
                                            placeholder="Ex: Banco X, Financeira Y">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer mt-3">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancelar</button>
                            <button type="submit" class="btn btn-primary" data-i18n="saveSale">Salvar Venda</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalLabel" data-i18n="newProduct">Novo Produto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="productForm" data-action="createProduct">
                        <input type="hidden" name="id" id="productId">
                        <div class="mb-3">
                            <label for="productName" class="form-label" data-i18n="name">Nome</label>
                            <input type="text" class="form-control" id="productName" name="nome" required>
                        </div>
                        <div class="mb-3">
                            <label for="productDescription" class="form-label" data-i18n="description">Descrição</label>
                            <textarea class="form-control" id="productDescription" name="descricao" rows="3"></textarea>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="productPrice" class="form-label" data-i18n="salePrice">Preço de Venda</label>
                                <input type="number" step="0.01" class="form-control" id="productPrice" name="preco" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="productCost" class="form-label" data-i18n="costPrice">Preço de Custo</label>
                                <input type="number" step="0.01" class="form-control" id="productCost" name="custo">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="productStock" class="form-label" data-i18n="stock">Estoque</label>
                                <input type="number" class="form-control" id="productStock" name="estoque" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="productSku" class="form-label" data-i18n="sku">SKU</label>
                                <input type="text" class="form-control" id="productSku" name="sku">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancelar</button>
                            <button type="submit" class="btn btn-primary" data-i18n="saveProduct">Salvar Produto</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmModalLabel">Confirmar Ação</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="confirmModalMessage">Você tem certeza?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger" id="confirmModalButton">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel" data-i18n="newUser">Novo Usuário</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm" data-action="createUser">
                        <input type="hidden" name="id" id="userId">
                        <div class="mb-3">
                            <label for="userName" class="form-label" data-i18n="username">Nome de Usuário</label>
                            <input type="text" class="form-control" id="userName" name="username" required>
                        </div>
                        <div class="mb-3">
                            <label for="userEmail" class="form-label" data-i18n="email">Email</label>
                            <input type="email" class="form-control" id="userEmail" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="userPassword" class="form-label" data-i18n="password">Senha</label>
                            <input type="password" class="form-control" id="userPassword" name="password" placeholder="Senha" autocomplete="current-password">
                        </div>
                        <div class="mb-3">
                            <label for="userRole" class="form-label" data-i18n="role">Função</label>
                            <select class="form-select" id="userRole" name="role">
                                <option value="vendedor" data-i18n="seller">Vendedor</option>
                                <option value="gerente" data-i18n="manager">Gerente</option>
                                <option value="admin" data-i18n="admin">Admin</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn btn-primary">Salvar Usuário</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="supplierModal" tabindex="-1" aria-labelledby="supplierModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="supplierModalLabel" data-i18n="newSupplier">Novo Fornecedor</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="supplierForm" data-action="createSupplier">
                        <input type="hidden" name="id" id="supplierId">
                        <div class="mb-3">
                            <label for="supplierName" class="form-label" data-i18n="name">Nome</label>
                            <input type="text" class="form-control" id="supplierName" name="nome" required>
                        </div>
                        <div class="mb-3">
                            <label for="supplierContact" class="form-label" data-i18n="contact">Contato</label>
                            <input type="text" class="form-control" id="supplierContact" name="contato">
                        </div>
                        <div class="mb-3">
                            <label for="supplierEmail" class="form-label" data-i18n="email">Email</label>
                            <input type="email" class="form-control" id="supplierEmail" name="email">
                        </div>
                        <div class="mb-3">
                            <label for="supplierCnpj" class="form-label" data-i18n="cpfCnpj">CNPJ</label>
                            <input type="text" class="form-control" id="supplierCnpj" name="cnpj">
                        </div>
                        <div class="mb-3">
                            <label for="supplierAddress" class="form-label" data-i18n="address">Endereço</label>
                            <input type="text" class="form-control" id="supplierAddress" name="endereco">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancelar</button>
                            <button type="submit" class="btn btn-primary" data-i18n="saveSupplier">Salvar Fornecedor</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="purchaseModal" tabindex="-1" aria-labelledby="purchaseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 600px !important; width: 600px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="purchaseModalLabel">Nova Compra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="purchaseForm" data-action="createPurchase">
                        <input type="hidden" id="purchaseId">
                        <div class="mb-3">
                            <label for="purchaseSupplier" class="form-label" data-i18n="supplier">Fornecedor</label>
                            <select class="form-select" id="purchaseSupplier" required></select>
                        </div>
                        <div class="mb-3">
                            <label for="purchaseDate" class="form-label" data-i18n="purchaseDate">Data da Compra</label>
                            <input type="date" class="form-control" id="purchaseDate" required>
                        </div>

                        <div class="card mb-3">
                            <div class="card-header" data-i18n="purchaseProducts">Produtos da Compra</div>
                            <div class="card-body">
                                <div id="purchaseProductsList" class="mb-2"
                                    style="max-height: 150px; overflow-y: auto;">
                                    <p class="text-muted text-center m-0" data-i18n="noProductsAdded">Nenhum produto adicionado.</p>
                                </div>
                                <div class="row g-2 align-items-end">
                                    <div class="col-md-5">
                                        <label for="purchaseProductSelect" class="form-label" data-i18n="product">Produto</label>
                                        <select class="form-control" id="purchaseProductSelect"
                                            style="width: 100%;"></select>
                                    </div>
                                    <div class="col-md-2">
                                        <label for="purchaseProductQuantity" class="form-label" data-i18n="quantity">Qtd</label>
                                        <input type="number" class="form-control" id="purchaseProductQuantity" value="1"
                                            min="1">
                                    </div>
                                    <div class="col-md-5">
                                        <label for="purchaseProductCost" class="form-label" data-i18n="unitCostPrice">Preço Custo Unit.</label>
                                        <input type="number" step="0.01" class="form-control" id="purchaseProductCost"
                                            placeholder="Custo" required>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <button type="button" class="btn btn-primary" id="btnAddPurchaseProduct"
                                            title="Adicionar Produto">
                                            <i class="fas fa-plus me-2"></i><span data-i18n="addProduct">Adicionar Produto</span>
                                        </button>
                                    </div>
                                </div>
                                <div id="purchaseProductDetailsDisplay" class="text-muted small mt-2 text-start"></div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="purchaseTotalValueDisplay" class="form-label" data-i18n="purchaseTotalValue">Valor Total da Compra</label>
                            <input type="text" class="form-control fw-bold" id="purchaseTotalValueDisplay" readonly
                                value="R$ 0,00">
                            <input type="hidden" id="purchaseTotalValue" value="0">
                        </div>

                        <div class="mb-3">
                            <label for="purchaseStatus" class="form-label" data-i18n="status">Status</label>
                            <select class="form-select" id="purchaseStatus">
                                <option value="Concluída" data-i18n="completed">Concluída</option>
                                <option value="Pendente" data-i18n="pending">Pendente</option>
                                <option value="Cancelada" data-i18n="cancelled">Cancelada</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="purchaseObservations" class="form-label" data-i18n="observations">Observações</label>
                            <textarea class="form-control" id="purchaseObservations" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100" data-i18n="savePurchase">Salvar Compra</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Cliente -->
    <div class="modal fade" id="clientDetailModal" tabindex="-1" aria-labelledby="clientDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="clientDetailModalLabel" data-i18n="clientDetails">Detalhes do Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="personalInformation">Informações Pessoais</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="id">ID:</strong></td>
                                    <td id="detailClientId">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="name">Nome:</strong></td>
                                    <td id="detailClientName">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="email">Email:</strong></td>
                                    <td id="detailClientEmail">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="phone">Telefone:</strong></td>
                                    <td id="detailClientPhone">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="cpfCnpj">CPF/CNPJ:</strong></td>
                                    <td id="detailClientCpfCnpj">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="address">Endereço:</strong></td>
                                    <td id="detailClientAddress">-</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="systemInformation">Informações do Sistema</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="createdAt">Data de Criação:</strong></td>
                                    <td id="detailClientCreated">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="updatedAt">Última Atualização:</strong></td>
                                    <td id="detailClientUpdated">-</td>
                                </tr>
                            </table>
                            
                            <h6 class="text-primary mt-3" data-i18n="statistics">Estatísticas</h6>
                            <div class="row">
                                <div class="col-6">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-primary" id="detailClientSalesCount">0</h5>
                                            <p class="card-text small" data-i18n="sales">Vendas</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-success" id="detailClientTotalSpent">R$ 0,00</h5>
                                            <p class="card-text small" data-i18n="totalSpent">Total Gasto</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Fechar</button>
                    <button type="button" class="btn btn-primary" id="editFromDetailBtn">
                        <i class="bi bi-pencil"></i> <span data-i18n="editClient">Editar Cliente</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes da Venda -->
    <div class="modal fade" id="saleDetailModal" tabindex="-1" aria-labelledby="saleDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saleDetailModalLabel" data-i18n="saleDetails">Detalhes da Venda</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="saleInformation">Informações da Venda</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="saleId">ID da Venda:</strong></td>
                                    <td id="detailSaleId">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="client">Cliente:</strong></td>
                                    <td id="detailSaleClient">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="saleDate">Data da Venda:</strong></td>
                                    <td id="detailSaleDate">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="totalValue">Valor Total:</strong></td>
                                    <td id="detailSaleTotal">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="status">Status:</strong></td>
                                    <td id="detailSaleStatus">-</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="saleProducts">Produtos da Venda</h6>
                            <div id="detailSaleProducts" class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th data-i18n="product">Produto</th>
                                            <th data-i18n="quantity">Qtd</th>
                                            <th data-i18n="unitPrice">Preço Unit.</th>
                                            <th data-i18n="total">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="detailSaleProductsList">
                                        <tr>
                                            <td colspan="4" class="text-center text-muted" data-i18n="loadingProducts">Carregando produtos...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <h6 class="text-primary mt-3" data-i18n="payments">Pagamentos</h6>
                            <div id="detailSalePayments" class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th data-i18n="date">Data</th>
                                            <th data-i18n="value">Valor</th>
                                            <th data-i18n="paymentMethod">Forma</th>
                                        </tr>
                                    </thead>
                                    <tbody id="detailSalePaymentsList">
                                        <tr>
                                            <td colspan="3" class="text-center text-muted" data-i18n="loadingPayments">Carregando pagamentos...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Fechar</button>
                    <button type="button" class="btn btn-primary" id="editSaleFromDetailBtn">
                        <i class="bi bi-pencil"></i> <span data-i18n="editSale">Editar Venda</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes da Compra -->
    <div class="modal fade" id="purchaseDetailModal" tabindex="-1" aria-labelledby="purchaseDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="purchaseDetailModalLabel" data-i18n="purchaseDetails">Detalhes da Compra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="purchaseInformation">Informações da Compra</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="purchaseId">ID da Compra:</strong></td>
                                    <td id="detailPurchaseId">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="supplier">Fornecedor:</strong></td>
                                    <td id="detailPurchaseSupplier">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="purchaseDate">Data da Compra:</strong></td>
                                    <td id="detailPurchaseDate">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="totalValue">Valor Total:</strong></td>
                                    <td id="detailPurchaseTotal">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="status">Status:</strong></td>
                                    <td id="detailPurchaseStatus">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="observations">Observações:</strong></td>
                                    <td id="detailPurchaseObservations">-</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="purchaseProducts">Produtos da Compra</h6>
                            <div id="detailPurchaseProducts" class="table-responsive">
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th data-i18n="product">Produto</th>
                                            <th data-i18n="quantity">Qtd</th>
                                            <th data-i18n="costPrice">Preço Custo</th>
                                            <th data-i18n="total">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="detailPurchaseProductsList">
                                        <tr>
                                            <td colspan="4" class="text-center text-muted" data-i18n="loadingProducts">Carregando produtos...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Fechar</button>
                    <button type="button" class="btn btn-primary" id="editPurchaseFromDetailBtn">
                        <i class="bi bi-pencil"></i> <span data-i18n="editPurchase">Editar Compra</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Fornecedor -->
    <div class="modal fade" id="supplierDetailModal" tabindex="-1" aria-labelledby="supplierDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="supplierDetailModalLabel" data-i18n="supplierDetails">Detalhes do Fornecedor</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="companyInformation">Informações da Empresa</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="id">ID:</strong></td>
                                    <td id="detailSupplierId">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="name">Nome:</strong></td>
                                    <td id="detailSupplierName">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="email">Email:</strong></td>
                                    <td id="detailSupplierEmail">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="phone">Telefone:</strong></td>
                                    <td id="detailSupplierPhone">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="cpfCnpj">CNPJ:</strong></td>
                                    <td id="detailSupplierCnpj">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="address">Endereço:</strong></td>
                                    <td id="detailSupplierAddress">-</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="systemInformation">Informações do Sistema</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="createdAt">Data de Criação:</strong></td>
                                    <td id="detailSupplierCreated">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="updatedAt">Última Atualização:</strong></td>
                                    <td id="detailSupplierUpdated">-</td>
                                </tr>
                            </table>
                            
                            <h6 class="text-primary mt-3" data-i18n="statistics">Estatísticas</h6>
                            <div class="row">
                                <div class="col-6">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-primary" id="detailSupplierPurchasesCount">0</h5>
                                            <p class="card-text small" data-i18n="purchases">Compras</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-success" id="detailSupplierTotalSpent">R$ 0,00</h5>
                                            <p class="card-text small" data-i18n="totalSpent">Total Gasto</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Fechar</button>
                    <button type="button" class="btn btn-primary" id="editSupplierFromDetailBtn">
                        <i class="bi bi-pencil"></i> <span data-i18n="editSupplier">Editar Fornecedor</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes do Usuário -->
    <div class="modal fade" id="userDetailModal" tabindex="-1" aria-labelledby="userDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userDetailModalLabel" data-i18n="userDetails">Detalhes do Usuário</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="accountInformation">Informações da Conta</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="id">ID:</strong></td>
                                    <td id="detailUserId">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="username">Username:</strong></td>
                                    <td id="detailUserName">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="email">Email:</strong></td>
                                    <td id="detailUserEmail">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="role">Perfil:</strong></td>
                                    <td id="detailUserRole">-</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary" data-i18n="systemInformation">Informações do Sistema</h6>
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong data-i18n="createdAt">Data de Criação:</strong></td>
                                    <td id="detailUserCreated">-</td>
                                </tr>
                                <tr>
                                    <td><strong data-i18n="updatedAt">Última Atualização:</strong></td>
                                    <td id="detailUserUpdated">-</td>
                                </tr>
                            </table>
                            
                            <h6 class="text-primary mt-3" data-i18n="accountStatus">Status da Conta</h6>
                            <div class="row">
                                <div class="col-12">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h5 class="card-title text-success" data-i18n="active">Ativo</h5>
                                            <p class="card-text small" data-i18n="activeAccount">Conta Ativa</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="close">Fechar</button>
                    <button type="button" class="btn btn-primary" id="editUserFromDetailBtn">
                        <i class="bi bi-pencil"></i> <span data-i18n="editUser">Editar Usuário</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Stock Settings Modal -->
    <div class="modal fade" id="stockSettingsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-gear me-2"></i>
                        <span data-i18n="stockSettingsTitle">Configurações de Alertas de Estoque</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card border-warning">
                                <div class="card-header bg-warning text-dark">
                                    <h6 class="mb-0">
                                        <i class="bi bi-exclamation-triangle me-2"></i>
                                        <span data-i18n="warningAlert">Alerta Amarelo</span>
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small" data-i18n="warningAlertDescription">
                                        Produtos com estoque abaixo deste limite gerarão alertas amarelos.
                                    </p>
                                    <div class="mb-3">
                                        <label for="warningThreshold" class="form-label" data-i18n="warningThreshold">Limite para Alerta Amarelo:</label>
                                        <input type="number" class="form-control" id="warningThreshold" min="0" value="10">
                                        <div class="form-text" data-i18n="warningThresholdHelp">Quantidade mínima para gerar alerta amarelo</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card border-danger">
                                <div class="card-header bg-danger text-white">
                                    <h6 class="mb-0">
                                        <i class="bi bi-exclamation-circle me-2"></i>
                                        <span data-i18n="criticalAlert">Alerta Vermelho</span>
                                    </h6>
                                </div>
                                <div class="card-body">
                                    <p class="text-muted small" data-i18n="criticalAlertDescription">
                                        Produtos com estoque abaixo deste limite gerarão alertas vermelhos.
                                    </p>
                                    <div class="mb-3">
                                        <label for="criticalThreshold" class="form-label" data-i18n="criticalThreshold">Limite para Alerta Vermelho:</label>
                                        <input type="number" class="form-control" id="criticalThreshold" min="0" value="5">
                                        <div class="form-text" data-i18n="criticalThresholdHelp">Quantidade mínima para gerar alerta vermelho</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-3">
                        <i class="bi bi-info-circle me-2"></i>
                        <span data-i18n="stockSettingsInfo">
                            Estas configurações são salvas localmente e aplicadas apenas a este estabelecimento.
                        </span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="cancel">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveStockSettings" data-i18n="saveSettings">Salvar Configurações</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Core Modules -->
    <script src="js/i18n/translations.js"></script>
    <script src="js/i18n/i18n.js"></script>

    <script src="js/stock-notifications.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js?v=3.9"></script>
    
    <script>
        // Função de logout inline robusta
        function performLogout() {
            console.log('Função performLogout chamada');
            
            if (confirm('Tem certeza que deseja sair?')) {
                console.log('Confirmado logout, limpando localStorage...');
                
                // Limpar localStorage
                localStorage.removeItem('token');
                localStorage.removeItem('user');
                localStorage.removeItem('jwtToken');
                localStorage.removeItem('userRole');
                localStorage.removeItem('userName');
                localStorage.removeItem('userId');
                
                // Limpar tudo por segurança
                localStorage.clear();
                
                console.log('localStorage limpo, redirecionando...');
                
                // Mostrar mensagem
                alert('Logout realizado com sucesso!');
                
                // Redirecionar para login
                window.location.href = 'login.html';
            }
        }
        
        // Função global para logout via console
        window.forceLogout = function() {
            console.log('Logout forçado via console');
            localStorage.clear();
            alert('Logout forçado realizado!');
            window.location.href = 'login.html';
        };
        
        // Adicionar event listener ao botão de logout como backup
        document.addEventListener('DOMContentLoaded', function() {
            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton) {
                console.log('Botão de logout encontrado, adicionando event listener...');
                logoutButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Clique no botão de logout detectado');
                    performLogout();
                });
            } else {
                console.log('Botão de logout não encontrado!');
            }
        });
    </script>

    <script>
        // Definir datas padrão para relatórios
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
            
            // Formatar datas para input type="date" (YYYY-MM-DD)
            const todayStr = today.toISOString().split('T')[0];
            const firstDayStr = firstDayOfMonth.toISOString().split('T')[0];
            
            // Definir datas padrão para relatórios
            const dateFields = [
                'startDate', 'endDate',
                'cashFlowStartDate', 'cashFlowEndDate',
                'accountingStartDate', 'accountingEndDate'
            ];
            
            dateFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    if (fieldId.includes('Start')) {
                        field.value = firstDayStr;
                    } else if (fieldId.includes('End')) {
                        field.value = todayStr;
                    }
                }
            });
        });
    </script>
</body>

</html>