<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Modais - Gestor PRO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 0.875rem;
        }
        
        .debug-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 2px solid #007bff;
            border-radius: 0.5rem;
        }
        
        .test-sidebar {
            width: 280px;
            background-color: #123C66;
            color: white;
            padding: 20px;
            position: fixed;
            height: 100%;
            left: 0;
            top: 0;
            z-index: 2000;
        }
        
        .test-content {
            margin-left: 280px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="test-sidebar">
        <h3>Sidebar Debug</h3>
        <p>Z-index: 2000</p>
    </div>
    
    <div class="test-content">
        <h1>üîç Debug dos Modais - Gestor PRO</h1>
        
        <div class="debug-section">
            <h3>üìä Informa√ß√µes do Sistema</h3>
            <div class="debug-info" id="systemInfo">
                Carregando informa√ß√µes...
            </div>
        </div>
        
        <div class="debug-section">
            <h3>üéØ Teste de Modais</h3>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-primary w-100 mb-3" data-bs-toggle="modal" data-bs-target="#clientModal">
                        Modal Cliente (Refer√™ncia)
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-success w-100 mb-3" data-bs-toggle="modal" data-bs-target="#saleModal">
                        Modal Venda (Problema)
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-info w-100 mb-3" data-bs-toggle="modal" data-bs-target="#purchaseModal">
                        Modal Compra (Problema)
                    </button>
                </div>
            </div>
            
            <div class="debug-info" id="modalDebug">
                Clique em um modal para ver informa√ß√µes de debug...
            </div>
        </div>
        
        <div class="debug-section">
            <h3>üîß Controles de Debug</h3>
            <div class="row">
                <div class="col-md-6">
                    <button class="btn btn-warning w-100 mb-2" onclick="forceModalSize()">
                        For√ßar Tamanho dos Modais
                    </button>
                </div>
                <div class="col-md-6">
                    <button class="btn btn-danger w-100 mb-2" onclick="checkZIndex()">
                        Verificar Z-Index
                    </button>
                </div>
            </div>
            <div class="debug-info" id="debugOutput">
                Resultados do debug aparecer√£o aqui...
            </div>
        </div>
    </div>

    <!-- Modal Cliente (Refer√™ncia) -->
    <div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="clientModalLabel">Novo Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Este √© o modal de refer√™ncia (tamanho normal).</p>
                    <div class="mb-3">
                        <label for="clientName" class="form-label">Nome</label>
                        <input type="text" class="form-control" id="clientName" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Venda (Problema) -->
    <div class="modal fade" id="saleModal" tabindex="-1" aria-labelledby="saleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 600px !important; width: 600px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saleModalLabel">Nova Venda</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Este √© o modal de venda (deve ter tamanho controlado).</p>
                    <div class="mb-3">
                        <label for="saleClient" class="form-label">Cliente</label>
                        <select class="form-select" id="saleClient" required>
                            <option value="">Selecione um cliente...</option>
                        </select>
                    </div>
                    <div class="card mb-3">
                        <div class="card-header">Produtos da Venda</div>
                        <div class="card-body">
                            <div class="row g-2 align-items-end">
                                <div class="col-md-5">
                                    <label for="productSelect" class="form-label">Produto</label>
                                    <select class="form-control" id="productSelect">
                                        <option value="">Selecione um produto...</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="productQuantity" class="form-label">Qtd</label>
                                    <input type="number" class="form-control" id="productQuantity" value="1" min="1">
                                </div>
                                <div class="col-md-3">
                                    <label for="productUnitPrice" class="form-label">Pre√ßo Unit.</label>
                                    <input type="number" step="0.01" class="form-control" id="productUnitPrice" placeholder="Pre√ßo" readonly>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-primary w-100" id="btnAddProduct">Adicionar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Compra (Problema) -->
    <div class="modal fade" id="purchaseModal" tabindex="-1" aria-labelledby="purchaseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 600px !important; width: 600px !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="purchaseModalLabel">Nova Compra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Este √© o modal de compra (deve ter tamanho controlado).</p>
                    <div class="mb-3">
                        <label for="purchaseSupplier" class="form-label">Fornecedor</label>
                        <select class="form-select" id="purchaseSupplier" required>
                            <option value="">Selecione um fornecedor...</option>
                        </select>
                    </div>
                    <div class="card mb-3">
                        <div class="card-header">Produtos da Compra</div>
                        <div class="card-body">
                            <div class="row g-2 align-items-end">
                                <div class="col-md-5">
                                    <label for="purchaseProductSelect" class="form-label">Produto</label>
                                    <select class="form-control" id="purchaseProductSelect">
                                        <option value="">Selecione um produto...</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="purchaseProductQuantity" class="form-label">Qtd</label>
                                    <input type="number" class="form-control" id="purchaseProductQuantity" value="1" min="1">
                                </div>
                                <div class="col-md-3">
                                    <label for="purchaseProductCost" class="form-label">Pre√ßo Custo</label>
                                    <input type="number" step="0.01" class="form-control" id="purchaseProductCost" placeholder="Custo" required>
                                </div>
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-primary w-100" id="btnAddPurchaseProduct">Adicionar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Informa√ß√µes do sistema
        function updateSystemInfo() {
            const systemInfo = document.getElementById('systemInfo');
            systemInfo.innerHTML = `
                <strong>Informa√ß√µes do Sistema:</strong><br>
                ‚Ä¢ User Agent: ${navigator.userAgent}<br>
                ‚Ä¢ Largura da tela: ${window.innerWidth}px<br>
                ‚Ä¢ Altura da tela: ${window.innerHeight}px<br>
                ‚Ä¢ Bootstrap vers√£o: ${typeof bootstrap !== 'undefined' ? 'Carregado' : 'N√£o carregado'}<br>
                ‚Ä¢ jQuery vers√£o: ${typeof $ !== 'undefined' ? $.fn.jquery : 'N√£o carregado'}<br>
                ‚Ä¢ Timestamp: ${new Date().toLocaleString()}
            `;
        }

        // Debug de modais
        function updateModalDebug(modalId) {
            const modal = document.getElementById(modalId);
            const modalDialog = modal.querySelector('.modal-dialog');
            const modalContent = modal.querySelector('.modal-content');
            
            const debugInfo = document.getElementById('modalDebug');
            debugInfo.innerHTML = `
                <strong>Debug do Modal: ${modalId}</strong><br>
                ‚Ä¢ Modal z-index: ${window.getComputedStyle(modal).zIndex}<br>
                ‚Ä¢ Modal-dialog max-width: ${window.getComputedStyle(modalDialog).maxWidth}<br>
                ‚Ä¢ Modal-dialog width: ${window.getComputedStyle(modalDialog).width}<br>
                ‚Ä¢ Modal-dialog margin: ${window.getComputedStyle(modalDialog).margin}<br>
                ‚Ä¢ Modal-content width: ${window.getComputedStyle(modalContent).width}<br>
                ‚Ä¢ Modal-dialog offsetWidth: ${modalDialog.offsetWidth}px<br>
                ‚Ä¢ Modal-dialog offsetHeight: ${modalDialog.offsetHeight}px<br>
                ‚Ä¢ Sidebar z-index: ${window.getComputedStyle(document.querySelector('.test-sidebar')).zIndex}<br>
                ‚Ä¢ Modal est√° na frente da sidebar: ${parseInt(window.getComputedStyle(modal).zIndex) > parseInt(window.getComputedStyle(document.querySelector('.test-sidebar')).zIndex)}
            `;
        }

        // For√ßar tamanho dos modais
        function forceModalSize() {
            const modals = ['saleModal', 'purchaseModal'];
            const output = document.getElementById('debugOutput');
            
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                const modalDialog = modal.querySelector('.modal-dialog');
                
                if (modalDialog) {
                    modalDialog.style.maxWidth = '600px';
                    modalDialog.style.width = '600px';
                    modalDialog.style.margin = '1.75rem auto';
                    
                    output.innerHTML += `<br>‚úÖ Modal ${modalId}: Tamanho for√ßado para 600px`;
                }
            });
        }

        // Verificar z-index
        function checkZIndex() {
            const output = document.getElementById('debugOutput');
            const sidebar = document.querySelector('.test-sidebar');
            const modals = ['clientModal', 'saleModal', 'purchaseModal'];
            
            output.innerHTML = '<strong>Verifica√ß√£o de Z-Index:</strong><br>';
            output.innerHTML += `‚Ä¢ Sidebar: ${window.getComputedStyle(sidebar).zIndex}<br>`;
            
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                const zIndex = window.getComputedStyle(modal).zIndex;
                output.innerHTML += `‚Ä¢ ${modalId}: ${zIndex}<br>`;
            });
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            updateSystemInfo();
            
            // Monitorar abertura dos modais
            const modals = ['clientModal', 'saleModal', 'purchaseModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                modal.addEventListener('shown.bs.modal', function() {
                    updateModalDebug(modalId);
                });
            });
            
            // Atualizar informa√ß√µes a cada 5 segundos
            setInterval(updateSystemInfo, 5000);
        });

        // Debug adicional quando modais s√£o abertos
        window.addEventListener('load', function() {
            console.log('üîç Debug Modais - P√°gina carregada');
            console.log('üìè Largura da tela:', window.innerWidth);
            console.log('üìê Altura da tela:', window.innerHeight);
        });
    </script>
</body>
</html> 